\newpage

\section{Conclusion}
\label{sec:conclusion}

This laboratory assignment had as the main objective the construction and analysis of a bandpass filter, using an OP-AMP. In the laboratory, the circuit presented in figure \ref{circuit} was analysed. After, this circuit was simulated using {\bf Ngspice} and analysed theoretically using {\bf Octave}. In the following graph, the results obtained in the lab and the ones obtained with {\bf Ngspice} and {\bf Octave} are presented.

\begin{figure}[H]
        \centering
        \includegraphics[width=0.8\textwidth]{gain_all.eps}
        \caption{Data comparison}
        \label{alldata}
\end{figure}

As it was expected, the different results show some deviations. Some possible reasons for the deviations of the experimental points were already given in Section~\ref{sec:simulation}. The deviations between the simulation and the theory are probably the consequence of the different model used for the OP-AMP. {\bf Ngspice} uses a quite complex model. On the contrary, for the theoretical analysis a very simple model was considered, in which the OP-AMP is ideal. As expected, the model used by {\bf Ngspice} is more realistic, so the simulated points come closer to the experimental points than the theoretical ones.

In the next table, the results for the simulation and the theory regarding the central frequency, the gain and the impedances are compared:

\begin{table}[H]
  \centering
  \begin{tabular}{|c|c|c|c|c|}
    \hline
        $V$ & $V_t$ & $V_s$ & $|V_t-V_s|$ & $Error (\%)$ \\
        \hline
        \hline
        \input{comparison}
        \hline
  \end{tabular}
  \caption{Theoretical values ($V_t$) and Simulation values ($V_s$) (table produced with {\bf Python})  - The absolute deviation and error presented here are rounded up to one significant digit, for ease of interpretation.}
  \label{error1_res}
\end{table}

For the optimized circuit, the following results were obtained:

\begin{table}[H]
  \centering
  \begin{tabular}{|c|c|c|c|c|}
    \hline
        $V$ & $V_t$ & $V_s$ & $|V_t-V_s|$ & $Error (\%)$ \\
        \hline
        \hline
        \input{comparison_mb}
        \hline
  \end{tabular}
  \caption{Theoretical values ($V_t$) and Simulation values ($V_s$) (table produced with {\bf Python})  - The absolute deviation and error presented here are rounded up to one significant digit, for ease of interpretation.}
  \label{error2_res}
\end{table}

In both instances, there were slight deviations, as was expected. The second circuit, compared with the first one, allowed for a slightly higher gain and a central frequency closer to the goal. Furthermore, it complied with the component limitations imposed, and the first one did not.

The merit figure (for the optimized, second circuit) is: \input{merit}.

Regarding the impedances, the input impedance is higher than the output impedance, as desired. However, especially in the second circuit, the output impedance is quite high. That would damage the signal if the circuit were connected to a load with lower impedance.  

All in all, the objectives were met. With more time and a lengthier study, better results could be obtained, and other solutions implemented.
